<!DOCTYPE html>
<html>

  <head>
    <script type="text/javascript"
            src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Dynaphopy : Phonon Analysis from Dynamical Data">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Dynaphopy</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <h2 id="project_tagline">Examples</h2>

        </header>
    </div>
    
    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
    	<section id="main_content" class="inner">

<a href="index.html"><div id="backbutton" s style="position:relative;right:-580px;top:-170px;width:60px"><body>Back</body></div></a>

<h3>Silicon</h3>
<p>Crystalline silicon is a well studied prototypical material that due to its simple cubic crystalline 
structure becomes very suitable as a working example.</p>
<h5>Preparations</h5>

<p>In order to calculate the anharmonic effects fist it is necessary to define the unit cell in a VASP POSCAR type file: </p>
<pre><code> Si                                        1.00000000000000          5.4365330000000000    0.0000000000000000    0.0000000000000000     0.0000000000000000    5.4365330000000000    0.0000000000000000     0.0000000000000000    0.0000000000000000    5.4365330000000000   Si     8Direct  0.8750000000000000  0.8750000000000000  0.8750000000000000  0.8750000000000000  0.3750000000000000  0.3750000000000000  0.3750000000000000  0.8750000000000000  0.3750000000000000  0.3750000000000000  0.3750000000000000  0.8750000000000000  0.1250000000000000  0.1250000000000000  0.1250000000000000  0.1250000000000000  0.6250000000000000  0.6250000000000000  0.6250000000000000  0.1250000000000000  0.6250000000000000  0.6250000000000000  0.6250000000000000  0.1250000000000000</code></pre>
<p>Using <a href="http://phonopy.sourceforge.net">Phonopy</a> the harmonic forces can be calculated as detailed in phonopy <a href="http://phonopy.sourceforge.net/procedure.html">online</a> tutorial. During the calculation, a SPOSCAR file which contains a supercell of the original POSCAR file is generated. This file can be used to calculate the MD in VASP.
<br><em>Note: The supercell used in Phonopy to calculate the harmonic forces and the one used to calculate the MD in VASP can be different.
Phonopy can easly generate a supercell with the desired size using the command:</em></p>

<pre><code> $ phonopy -d --dim="2 3 2" -c POSCAR_unitcell                                    
</code></pre>

<p>This generates a SPOSCAR file containing a 2x3x2 supercell of POSCAR_unitcell file.
<br>VASP MD calculation can be carried out using this supercell (changing its name from SPOSCAR to POSCAR) and defining a regular VASP MD input like this: </p>
  
<pre><code>      PREC = Normal                  # Normal precision may be necessary    IBRION = 0      ISYM = 0     SMASS = 0                       # Define Thermostat    MDALGO = 0     POTIM = 0.7                     # Step length     TEBEG = 600                     # Temperature       NSW = 200000                  # Number of time steps    NELMIN = 2                             NELM = 100                          ENCUT = 300     EDIFF = 1.000000e-06    ISMEAR = 0     SIGMA = 0.01     IALGO = 38       GGA = PS                           LREAL = .TRUE.   ADDGRID = .TRUE.     LWAVE = .FALSE.    LCHARG = .FALSE.      NPAR = 4</code></pre>
<p> EDIFF may have great influence in the exactitute of the results. Longer time step lenghts are recomended to increase the convergence of
phonon linewidths but to long could compromise the reliability of the simulation. 
PREC seems to not affect specially the results in the case of sillicon but be carefull with other materials. </p>
<p>Once VASP <strong>OUTCAR</strong> and Phonopy <strong>FORCE_SETS</strong> are generated the only thing remaining is create a Dynaphopy input.
</p>
<pre><code>STRUCTURE FILE POSCAR/home/user/Si-phonopy/POSCAR_unitcellFORCE CONSTANTS/home/user/Si-phonopy/FORCE_SETSPRIMITIVE MATRIX0.0 0.5 0.50.5 0.0 0.50.5 0.5 0.0SUPERCELL MATRIX PHONOPY2 0 00 3 00 0 2BANDS0.0,   0.0,   0.0         0.5,   0.0,  0.50.5,   0.0,   0.5         0.625  0.25  0.6250.375, 0.375, 0.75        0.0,   0.0,  0.00.0,   0.0,   0.0         0.5,   0.5,  0.5
</pre></code>
<p>At this point all the information needed to run Dynaphopy is complete</p>

<h5>Calculation examples</h5>

<UL><p><LI>Load interactive interface (using last 80000 time steps):</p></UL>
<pre><code>$ ./dynaphopy input_file OUTCAR -n 800000 -i</code></pre>

<UL><p><LI>Plot wave vector projection power spectrum at <em>L</em> point from 0 to 16 THz:</p></UL>
<pre><code>$ ./dynaphopy input_file OUTCAR -n 800000 -pw -q 0.5 0.5 0.5 -r 0 16 200</code></pre>
<img src="images/L_600.pdf" alt="Interactive" style="width:605px">

<UL><p><LI>Save phonon mode projection power spectrum at <em>X</em> point to spectrum.dat file :</p></UL>
<pre><code>$ ./dynaphopy input_file OUTCAR -n 800000 -sw power.dat -q 0.5 0.0 0.5</code></pre>

<UL><p><LI>Peak analysis at <em>&Gamma;</em> point using MEM method (parallel) with 3000 coeficients:</p></UL>
<pre><code>$ ./dynaphopy input_file OUTCAR -n 2000000 -pa -psm 4 -cf 3000</code></pre>
<p></p>

<pre><code>Peak # 4------------------------------------Width (FWHM): 0.840947499447 THzPosition: 15.2067936887 THzFrequency shift: -0.0531330605831 THzFitting Error (MMSE): 175.41060441Peak # 5------------------------------------Width (FWHM): 0.831509855563 THzPosition: 15.2007348236 THzFrequency shift: -0.0591919256555 THzFitting Error (MMSE): 122.527840653Peak # 6------------------------------------Width (FWHM): 0.898610177277 THzPosition: 15.1706635365 THzFrequency shift: -0.08926321275 THzFitting Error (MMSE): 116.735106226</code></pre></UL>
    </section>
    </div>
    
    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Dynaphopy maintained by <a href="https://github.com/abelcarreras">abelcarreras</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>
    
  </body>
</html>